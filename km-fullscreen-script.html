<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Kommunicate Script</title>
</head>
<body>
    <script type="text/javascript">
        (function(d, m){
          var kommunicateSettings = {"appId":"21b194f9ddf67dede981c89d261c6fec5","conversationTitle":"Vivian","openConversationOnNewMessage":true,"attachment":false,
          "labels": {
            'input.message':'Type your message or push a button...'
          },
              "onInit": function() {
                  Kommunicate.launchConversation(); //Launches the chat widget
                  var iframeStyle = document.createElement('style');
                  var classSettings = ".change-kommunicate-iframe-height{height:100%!important;width:100%!important;right:0!important;bottom:0!important;max-height: 100%!important;}";
                  iframeStyle.type = 'text/css';
                  iframeStyle.innerHTML = classSettings;
                  document.getElementsByTagName('head')[0].appendChild(iframeStyle);
                  var launcherIconStyle = "@media(min-width: 510px){.mck-sidebox.fade.in,.mck-box .mck-box-sm{width:100%; height:100%;max-height:100%!important;border-radius:0px!important;}.mck-sidebox{right:0!important;bottom:0!important;}} .mck-tab-link.blk-lg-2.mck-back-btn-container { display: none !important; } .blk-lg-2.mck-close-btn { display: none !important; } #mck-attachfile-box {display:none;}";
                  Kommunicate.customizeWidgetCss(launcherIconStyle);
                  //Kommunicate.customizeWidgetCss("#mck-attachfile-box {display:none;}");
                  //Kommunicate.customizeWidgetCss("#mck-file-up2 {display:none;}");
                  //Kommunicate.customizeWidgetCss(".mck-tab-link.blk-lg-2.mck-back-btn-container.vis-table { display: none !important; }");
                  //Kommunicate.customizeWidgetCss(".blk-lg-2.mck-close-btn { display: none !important; }");
                  
                  Kommunicate.customizeWidgetCss(".mck-tab-link.blk-lg-2.mck-back-btn-container { display: none !important; } .blk-lg-2.mck-close-btn { display: none !important; } #mck-attachfile-box {display:none;}");
                  var chatContext = {
                    "stage":"55"
                  }
                  Kommunicate.updateChatContext(chatContext);
                  var iframe = window.top.document.getElementsByTagName("iframe")[0];
                  var addClassToIframe = iframe.contentDocument.getElementById("kommunicate-widget-iframe");
                  addClassToIframe.classList.add("change-kommunicate-iframe-height");  
                  KommunicateGlobal.document.getElementById('km-chat-widget-close-button').addEventListener('click',function(){
                      var closeButtonClick = parent.document.getElementById("kommunicate-widget-iframe");
                      closeButtonClick.classList.add("change-kommunicate-iframe-height");
                  });
              }
          };
          var s = document.createElement("script"); s.type = "text/javascript"; s.async = true;
          s.src = "https://api.kommunicate.io/v2/kommunicate.app";
          var h = document.getElementsByTagName("head")[0]; h.appendChild(s);
          window.kommunicate = m; m._globals = kommunicateSettings;
        })(document, window.kommunicate || {});
    </script>
</body>
</html>
